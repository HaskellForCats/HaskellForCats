<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Network.HTTP</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Network-HTTP.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">HTTP-4000.2.19: A library for client-side HTTP</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Copyright</th><td>See LICENSE file</td></tr><tr><th>License</th><td>BSD</td></tr><tr><th>Maintainer</th><td>Ganesh Sittampalam &lt;ganesh@earth.li&gt;</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Portability</th><td>non-portable (not tested)</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell98</td></tr></table><p class="caption">Network.HTTP</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>The <code><a href="Network.html#t:HTTP">HTTP</a></code> module provides a simple interface for sending and
 receiving content over HTTP in Haskell. Here's how to fetch a document from
 a URL and return it as a String:</p><pre>
   simpleHTTP (getRequest &quot;http://www.haskell.org/&quot;) &gt;&gt;= fmap (take 100) . getResponseBody
       -- fetch document and return it (as a 'String'.)</pre><p>Other functions let you control the submission and transfer of HTTP
 <code><a href="Network-HTTP-Base.html#t:Request">Request</a></code>s and <code><a href="Network-HTTP-Base.html#t:Response">Response</a></code>s more carefully, letting you integrate the use
 of <code><a href="Network.html#t:HTTP">HTTP</a></code> functionality into your application.</p><p>The module also exports the main types of the package, <code><a href="Network-HTTP-Base.html#t:Request">Request</a></code> and <code><a href="Network-HTTP-Base.html#t:Response">Response</a></code>,
 along with <code><a href="Network-HTTP-Headers.html#t:Header">Header</a></code> and functions for working with these.</p><p>The actual functionality is implemented by modules in the <code>Network.HTTP.*</code>
 namespace, letting you either use the default implementation here
 by importing <code>Network.HTTP</code> or, for more specific uses, selectively
 import the modules in <code>Network.HTTP.*</code>. To wit, more than one kind of
 representation of the bulk data that flows across a HTTP connection is 
 supported. (see <a href="Network-HTTP-HandleStream.html">Network.HTTP.HandleStream</a>.)</p><p><em>NOTE:</em> The <code><a href="Network-HTTP-Base.html#t:Request">Request</a></code> send actions will normalize the <code>Request</code> prior to transmission.
 Normalization such as having the request path be in the expected form and, possibly,
 introduce a default <code>Host:</code> header if one isn't already present.
 Normalization also takes the <code>&quot;user:pass@&quot;</code> portion out of the the URI,
 if it was supplied, and converts it into <code>Authorization: Basic$ header.
 If you do not 
 want the requests tampered with, but sent as-is, please import and use the
 the <a href="Network-HTTP-HandleStream.html">Network.HTTP.HandleStream</a> or <a href="Network-HTTP-Stream.html">Network.HTTP.Stream</a> modules instead. They
 export the same functions, but leaves construction and any normalization of 
 </code>Request@s to the user.</p><p><em>NOTE:</em> This package only supports HTTP; it does not support HTTPS.
 Attempts to use HTTPS result in an error.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short">module <a href="Network-HTTP-Base.html">Network.HTTP.Base</a></li><li class="src short">module <a href="Network-HTTP-Headers.html">Network.HTTP.Headers</a></li><li class="src short"><a href="#v:simpleHTTP">simpleHTTP</a> :: <a href="Network-TCP.html#t:HStream">HStream</a> ty =&gt; <a href="Network-HTTP-Base.html#t:Request">Request</a> ty -&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.0/System-IO.html#t:IO">IO</a> (<a href="Network-Stream.html#t:Result">Result</a> (<a href="Network-HTTP-Base.html#t:Response">Response</a> ty))</li><li class="src short"><a href="#v:simpleHTTP_">simpleHTTP_</a> :: <a href="Network-TCP.html#t:HStream">HStream</a> ty =&gt; <a href="Network-TCP.html#t:HandleStream">HandleStream</a> ty -&gt; <a href="Network-HTTP-Base.html#t:Request">Request</a> ty -&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.0/System-IO.html#t:IO">IO</a> (<a href="Network-Stream.html#t:Result">Result</a> (<a href="Network-HTTP-Base.html#t:Response">Response</a> ty))</li><li class="src short"><a href="#v:sendHTTP">sendHTTP</a> :: <a href="Network-TCP.html#t:HStream">HStream</a> ty =&gt; <a href="Network-TCP.html#t:HandleStream">HandleStream</a> ty -&gt; <a href="Network-HTTP-Base.html#t:Request">Request</a> ty -&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.0/System-IO.html#t:IO">IO</a> (<a href="Network-Stream.html#t:Result">Result</a> (<a href="Network-HTTP-Base.html#t:Response">Response</a> ty))</li><li class="src short"><a href="#v:sendHTTP_notify">sendHTTP_notify</a> :: <a href="Network-TCP.html#t:HStream">HStream</a> ty =&gt; <a href="Network-TCP.html#t:HandleStream">HandleStream</a> ty -&gt; <a href="Network-HTTP-Base.html#t:Request">Request</a> ty -&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.0/System-IO.html#t:IO">IO</a> () -&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.0/System-IO.html#t:IO">IO</a> (<a href="Network-Stream.html#t:Result">Result</a> (<a href="Network-HTTP-Base.html#t:Response">Response</a> ty))</li><li class="src short"><a href="#v:receiveHTTP">receiveHTTP</a> :: <a href="Network-TCP.html#t:HStream">HStream</a> ty =&gt; <a href="Network-TCP.html#t:HandleStream">HandleStream</a> ty -&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.0/System-IO.html#t:IO">IO</a> (<a href="Network-Stream.html#t:Result">Result</a> (<a href="Network-HTTP-Base.html#t:Request">Request</a> ty))</li><li class="src short"><a href="#v:respondHTTP">respondHTTP</a> :: <a href="Network-TCP.html#t:HStream">HStream</a> ty =&gt; <a href="Network-TCP.html#t:HandleStream">HandleStream</a> ty -&gt; <a href="Network-HTTP-Base.html#t:Response">Response</a> ty -&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short">module <a href="Network-TCP.html">Network.TCP</a></li><li class="src short"><a href="#v:getRequest">getRequest</a> :: <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.0/Data-String.html#t:String">String</a> -&gt; <a href="Network-HTTP-Base.html#t:Request_String">Request_String</a></li><li class="src short"><a href="#v:headRequest">headRequest</a> :: <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.0/Data-String.html#t:String">String</a> -&gt; <a href="Network-HTTP-Base.html#t:Request_String">Request_String</a></li><li class="src short"><a href="#v:postRequest">postRequest</a> :: <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.0/Data-String.html#t:String">String</a> -&gt; <a href="Network-HTTP-Base.html#t:Request_String">Request_String</a></li><li class="src short"><a href="#v:postRequestWithBody">postRequestWithBody</a> :: <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.0/Data-String.html#t:String">String</a> -&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.0/Data-String.html#t:String">String</a> -&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.0/Data-String.html#t:String">String</a> -&gt; <a href="Network-HTTP-Base.html#t:Request_String">Request_String</a></li><li class="src short"><a href="#v:getResponseBody">getResponseBody</a> ::  <a href="Network-Stream.html#t:Result">Result</a> (<a href="Network-HTTP-Base.html#t:Response">Response</a> ty) -&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.0/System-IO.html#t:IO">IO</a> ty</li><li class="src short"><a href="#v:getResponseCode">getResponseCode</a> ::  <a href="Network-Stream.html#t:Result">Result</a> (<a href="Network-HTTP-Base.html#t:Response">Response</a> ty) -&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.0/System-IO.html#t:IO">IO</a> <a href="Network-HTTP-Base.html#t:ResponseCode">ResponseCode</a></li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src">module <a href="Network-HTTP-Base.html">Network.HTTP.Base</a></p></div><div class="top"><p class="src">module <a href="Network-HTTP-Headers.html">Network.HTTP.Headers</a></p></div><div class="top"><p class="src"><a name="v:simpleHTTP" class="def">simpleHTTP</a> :: <a href="Network-TCP.html#t:HStream">HStream</a> ty =&gt; <a href="Network-HTTP-Base.html#t:Request">Request</a> ty -&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.0/System-IO.html#t:IO">IO</a> (<a href="Network-Stream.html#t:Result">Result</a> (<a href="Network-HTTP-Base.html#t:Response">Response</a> ty))</p><div class="doc"><p><code>simpleHTTP req</code> transmits the <code><a href="Network-HTTP-Base.html#t:Request">Request</a></code> <code>req</code> by opening a <em>direct</em>, non-persistent
 connection to the HTTP server that <code>req</code> is destined for, followed by transmitting
 it and gathering up the response as a <code><a href="Network-Stream.html#t:Result">Result</a></code>. Prior to sending the request,
 it is normalized (via <code><a href="Network-HTTP-Base.html#v:normalizeRequest">normalizeRequest</a></code>). If you have to mediate the request
 via an HTTP proxy, you will have to normalize the request yourself. Or switch to
 using <code><a href="Network.html#t:Browser">Browser</a></code> instead.</p><p>Examples:</p><pre>simpleHTTP (getRequest &quot;http://hackage.haskell.org/&quot;)
simpleHTTP (getRequest &quot;http://hackage.haskell.org:8012/&quot;)</pre></div></div><div class="top"><p class="src"><a name="v:simpleHTTP_" class="def">simpleHTTP_</a> :: <a href="Network-TCP.html#t:HStream">HStream</a> ty =&gt; <a href="Network-TCP.html#t:HandleStream">HandleStream</a> ty -&gt; <a href="Network-HTTP-Base.html#t:Request">Request</a> ty -&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.0/System-IO.html#t:IO">IO</a> (<a href="Network-Stream.html#t:Result">Result</a> (<a href="Network-HTTP-Base.html#t:Response">Response</a> ty))</p><div class="doc"><p>Identical to <code><a href="Network-HTTP.html#v:simpleHTTP">simpleHTTP</a></code>, but acting on an already opened stream.</p></div></div><div class="top"><p class="src"><a name="v:sendHTTP" class="def">sendHTTP</a> :: <a href="Network-TCP.html#t:HStream">HStream</a> ty =&gt; <a href="Network-TCP.html#t:HandleStream">HandleStream</a> ty -&gt; <a href="Network-HTTP-Base.html#t:Request">Request</a> ty -&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.0/System-IO.html#t:IO">IO</a> (<a href="Network-Stream.html#t:Result">Result</a> (<a href="Network-HTTP-Base.html#t:Response">Response</a> ty))</p><div class="doc"><p><code>sendHTTP hStream httpRequest</code> transmits <code>httpRequest</code> (after normalization) over
 <code>hStream</code>, but does not alter the status of the connection, nor request it to be
 closed upon receiving the response.</p></div></div><div class="top"><p class="src"><a name="v:sendHTTP_notify" class="def">sendHTTP_notify</a> :: <a href="Network-TCP.html#t:HStream">HStream</a> ty =&gt; <a href="Network-TCP.html#t:HandleStream">HandleStream</a> ty -&gt; <a href="Network-HTTP-Base.html#t:Request">Request</a> ty -&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.0/System-IO.html#t:IO">IO</a> () -&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.0/System-IO.html#t:IO">IO</a> (<a href="Network-Stream.html#t:Result">Result</a> (<a href="Network-HTTP-Base.html#t:Response">Response</a> ty))</p><div class="doc"><p><code>sendHTTP_notify hStream httpRequest action</code> behaves like <code><a href="Network-HTTP.html#v:sendHTTP">sendHTTP</a></code>, but
 lets you supply an IO <code>action</code> to execute once the request has been successfully
 transmitted over the connection. Useful when you want to set up tracing of
 request transmission and its performance.</p></div></div><div class="top"><p class="src"><a name="v:receiveHTTP" class="def">receiveHTTP</a> :: <a href="Network-TCP.html#t:HStream">HStream</a> ty =&gt; <a href="Network-TCP.html#t:HandleStream">HandleStream</a> ty -&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.0/System-IO.html#t:IO">IO</a> (<a href="Network-Stream.html#t:Result">Result</a> (<a href="Network-HTTP-Base.html#t:Request">Request</a> ty))</p><div class="doc"><p><code>receiveHTTP hStream</code> reads a <code><a href="Network-HTTP-Base.html#t:Request">Request</a></code> from the <code><a href="Network-TCP.html#t:HandleStream">HandleStream</a></code> <code>hStream</code></p></div></div><div class="top"><p class="src"><a name="v:respondHTTP" class="def">respondHTTP</a> :: <a href="Network-TCP.html#t:HStream">HStream</a> ty =&gt; <a href="Network-TCP.html#t:HandleStream">HandleStream</a> ty -&gt; <a href="Network-HTTP-Base.html#t:Response">Response</a> ty -&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.0/System-IO.html#t:IO">IO</a> ()</p><div class="doc"><p><code>respondHTTP hStream httpResponse</code> transmits an HTTP <code><a href="Network-HTTP-Base.html#t:Response">Response</a></code> over
 the <code><a href="Network-TCP.html#t:HandleStream">HandleStream</a></code> <code>hStream</code>. It could be used to implement simple web
 server interactions, performing the dual role to <code><a href="Network-HTTP.html#v:sendHTTP">sendHTTP</a></code>.</p></div></div><div class="top"><p class="src">module <a href="Network-TCP.html">Network.TCP</a></p></div><div class="top"><p class="src"><a name="v:getRequest" class="def">getRequest</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.0/Data-String.html#t:String">String</a></td><td class="doc"><p>URL to fetch</p></td></tr><tr><td class="src">-&gt; <a href="Network-HTTP-Base.html#t:Request_String">Request_String</a></td><td class="doc"><p>The constructed request</p></td></tr></table></div><div class="doc"><p>A convenience constructor for a GET <code><a href="Network-HTTP-Base.html#t:Request">Request</a></code>.</p><p>If the URL isn't syntactically valid, the function raises an error.</p></div></div><div class="top"><p class="src"><a name="v:headRequest" class="def">headRequest</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.0/Data-String.html#t:String">String</a></td><td class="doc"><p>URL to fetch</p></td></tr><tr><td class="src">-&gt; <a href="Network-HTTP-Base.html#t:Request_String">Request_String</a></td><td class="doc"><p>The constructed request</p></td></tr></table></div><div class="doc"><p>A convenience constructor for a HEAD <code><a href="Network-HTTP-Base.html#t:Request">Request</a></code>.</p><p>If the URL isn't syntactically valid, the function raises an error.</p></div></div><div class="top"><p class="src"><a name="v:postRequest" class="def">postRequest</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.0/Data-String.html#t:String">String</a></td><td class="doc"><p>URL to POST to</p></td></tr><tr><td class="src">-&gt; <a href="Network-HTTP-Base.html#t:Request_String">Request_String</a></td><td class="doc"><p>The constructed request</p></td></tr></table></div><div class="doc"><p>A convenience constructor for a POST <code><a href="Network-HTTP-Base.html#t:Request">Request</a></code>.</p><p>If the URL isn't syntactically valid, the function raises an error.</p></div></div><div class="top"><p class="src"><a name="v:postRequestWithBody" class="def">postRequestWithBody</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.0/Data-String.html#t:String">String</a></td><td class="doc"><p>URL to POST to</p></td></tr><tr><td class="src">-&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.0/Data-String.html#t:String">String</a></td><td class="doc"><p>Content-Type of body</p></td></tr><tr><td class="src">-&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.0/Data-String.html#t:String">String</a></td><td class="doc"><p>The body of the request</p></td></tr><tr><td class="src">-&gt; <a href="Network-HTTP-Base.html#t:Request_String">Request_String</a></td><td class="doc"><p>The constructed request</p></td></tr></table></div><div class="doc"><p>A convenience constructor for a POST <code><a href="Network-HTTP-Base.html#t:Request">Request</a></code>.</p><p>It constructs a request and sets the body as well as
 the Content-Type and Content-Length headers. The contents of the body
 are forced to calculate the value for the Content-Length header.</p><p>If the URL isn't syntactically valid, the function raises an error.</p></div></div><div class="top"><p class="src"><a name="v:getResponseBody" class="def">getResponseBody</a> ::  <a href="Network-Stream.html#t:Result">Result</a> (<a href="Network-HTTP-Base.html#t:Response">Response</a> ty) -&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.0/System-IO.html#t:IO">IO</a> ty</p><div class="doc"><p><code>getResponseBody response</code> takes the response of a HTTP requesting action and
 tries to extricate the body of the <code><a href="Network-HTTP-Base.html#t:Response">Response</a></code> <code>response</code>. If the request action
 returned an error, an IO exception is raised.</p></div></div><div class="top"><p class="src"><a name="v:getResponseCode" class="def">getResponseCode</a> ::  <a href="Network-Stream.html#t:Result">Result</a> (<a href="Network-HTTP-Base.html#t:Response">Response</a> ty) -&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.7.0.0/System-IO.html#t:IO">IO</a> <a href="Network-HTTP-Base.html#t:ResponseCode">ResponseCode</a></p><div class="doc"><p><code>getResponseBody response</code> takes the response of a HTTP requesting action and
 tries to extricate the status code of the <code><a href="Network-HTTP-Base.html#t:Response">Response</a></code> <code>response</code>. If the request action
 returned an error, an IO exception is raised.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.14.2</p></div></body></html>